definitions:
  handler.ErrorResponse:
    properties:
      error:
        type: string
    type: object
  handler.StatusResponse:
    properties:
      status:
        type: string
    type: object
  model.Message:
    properties:
      attempt_count:
        type: integer
      content:
        type: string
      external_id:
        type: string
      id:
        type: integer
      phone_number:
        type: string
      sent_time:
        type: string
      status:
        $ref: '#/definitions/model.MessageStatus'
    type: object
  model.MessageStatus:
    enum:
    - PENDING
    - SENT
    - FAILED
    type: string
    x-enum-varnames:
    - StatusPending
    - StatusSent
    - StatusFailed
  service.SentMessagesResponse:
    properties:
      messages:
        items:
          $ref: '#/definitions/model.Message'
        type: array
      next_cursor:
        type: string
    type: object
info:
  contact: {}
paths:
  /api/v1/messages/sent:
    get:
      consumes:
      - application/json
      description: |-
        Returns a list of messages with status `sent`, ordered by `sent_time` ascending.
        Supports cursor-based pagination via the `after` cursor.
      parameters:
      - description: Return messages sent after this timestamp (RFC3339)
        in: query
        name: after
        type: string
      - description: Number of messages to return (1â€“50), defaults to 42
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/service.SentMessagesResponse'
            type: array
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: List sent messages
      tags:
      - messages
  /api/v1/scheduler/toggle:
    post:
      description: Starts the scheduler if it is stopped, or stops it if it is running.
      produces:
      - application/json
      responses:
        "200":
          description: Scheduler started or stopped
          schema:
            $ref: '#/definitions/handler.StatusResponse'
      summary: Toggle the message scheduler
      tags:
      - Scheduler
swagger: "2.0"
